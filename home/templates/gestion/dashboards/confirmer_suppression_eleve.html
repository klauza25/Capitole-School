<!-- templates/gestion/dashboards/confirmer_suppression_eleve.html -->
{% extends "gestion/base.html" %}
{% block title %}Confirmer la suppression - Capitole School{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- En-tête -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 text-dark">⚠️ Confirmer la suppression</h1>
        <a href="{% url 'home:liste_eleves' %}" class="btn btn-secondary">← Retour</a>
    </div>

    <!-- Alerte -->
    <div class="alert alert-danger">
        <h4 class="alert-heading">
            <i class="fas fa-exclamation-triangle me-2"></i>
            Êtes-vous sûr de vouloir supprimer cet élève ?
        </h4>
        <p>
            Vous êtes sur le point de supprimer :
        </p>
        <div class="bg-light p-3 rounded mb-3">
            <strong>Nom :</strong> {{ eleve.utilisateur.get_full_name }}<br>
            <strong>Matricule :</strong> {{ eleve.matricule }}<br>
            <strong>Classe :</strong> {{ eleve.classe_actuelle|default:"Non assigné" }}
        </div>
        <p class="mb-0">
            <strong class="text-danger">Cette action est irréversible.</strong><br>
            Toutes les données liées (notes, présences, paiements) seront perdues.
        </p>
    </div>

    <!-- Formulaire -->
    <form method="post">
        {% csrf_token %}
        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-danger">
                <i class="fas fa-trash me-1"></i> Oui, supprimer définitivement
            </button>
            <a href="{% url 'home:liste_eleves' %}" class="btn btn-secondary">
                <i class="fas fa-times me-1"></i> Annuler
            </a>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Demande de confirmation supplémentaire
    document.querySelector('form').addEventListener('submit', function(e) {
        const confirmed = confirm("⚠️ Êtes-vous ABSOLUMENT sûr de vouloir supprimer cet élève ?\nCette action est irréversible.");
        if (!confirmed) {
            e.preventDefault();
        }
    });
</script>
{% endblock %}